
<!-- saved from url=(0082)http://corelab.postech.ac.kr/~hanjun/2014F_compiler/hw/fun_language_definition.php -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
 <title>CSED 423: Compiler Design</title>

  <style type="text/css">
    div.menu-group { margin-top: 1em; }
    .menu-group-header { color: white; padding: 0; 
    width: 100%; background: #000000; font-size: large;}
    .menu-group-items { font-size: small; }
  </style>

  <style type="text/css">
    a:link { color: #202060; }        /* unvisited link */
    a:visited { color: #6060A0 }   /* visited link */
    a:active { color: #808080; }      /* active link */
    table.foo td { padding: 5px; margin: 0; border: 0; }
  </style>
</head>

<body style="background: #FFFFFF" data-feedly-mini="yes"><div id="yass_top_edge_dummy" style="width: 1px; height: 1px; padding: 0px; margin: -9px 0px 0px; border-width: 0px; display: block;"></div><div id="yass_top_edge" style="padding: 0px; margin: 0px 0px 8px -8px; border-width: 0px; height: 0px; display: block; width: 960px; background-image: url(chrome-extension://khpcanbeojalbkpgpmjpdkjnkfcgfkhb/edgebgtop.png); background-attachment: scroll; background-position: 50% 100%;"></div>
<table border="0" width="100%" cellpadding="5" cellspacing="0">
<tbody><tr>
        <td align="LEFT" valign="MIDDLE" width="35%">
                <h3>
                        <a href="http://cse.postech.ac.kr/">Department	of Computer	Science and Engineering</a><br>
                        <a href="http://www.postech.ac.kr/">POSTECH</a><br>
                </h3>
        </td>
        <td valign="MIDDLE" align="CENTER">
                <h2>
                        CSED 423: Compiler Design
                        <br><br>
                        <a href="http://corelab.postech.ac.kr/~hanjun/">Prof. Hanjun Kim</a>
                </h2>
        </td>
        <td valign="MIDDLE" align="RIGHT" width="35%">
                <h3>
                        <large>Fall 2014</large>
                </h3><h3>
        </h3></td>
</tr>
</tbody></table>
<center>
<a href="http://corelab.postech.ac.kr/~hanjun/2014F_compiler/index.php">General Information</a>
| <a href="http://corelab.postech.ac.kr/~hanjun/2014F_compiler/schedule.php">Schedule and Readings</a>
| <big><b>Assignments</b></big> 

</center>
<hr>
<h2 style="font-family: georgia,times new roman,times,serif;">The Definition of Fun</h2>
<p style="font-family: georgia,times new roman,times,serif;"> In this document, we use ordinary font for nonterminal symbols in the grammar (eg: id). We use bold for keywords (eg: <b>let</b>, <b>in</b>). </p>
<h4 style="font-family: georgia,times new roman,times,serif;">Lexical Issues</h4>
<ol style="font-family: georgia,times new roman,times,serif;">
  <li>Identifiers (id). An identifier is a sequence of letters, digits, and underscores, starting with a letter. Uppercase letters are distinguished from lowercase. </li>

  <li>Comments. Comments may appear between any two tokens. Comments start with /* and end with */ and may be nested. </li>
  <li>White space. White space (newline, carriage-return, tab, space characters) may appear between any two tokens.</li>
  <li>Numbers (num) are 30-bit positive integers. (numbers may be preceded by a minus sign, but the minus sign should be lexed as a separate token.)</li>
  <li>
    <p style="margin-top: 0pt; margin-bottom: 0pt;">Fun reserves the following keywords: <b>fun in let while do if then else ref not type</b> </p>
    <p style="margin-top: 0pt; margin-bottom: 0pt;"> </p> </li>

</ol>
<p style="font-family: georgia,times new roman,times,serif;"><b>Program Structure</b></p>
<p style="font-family: georgia,times new roman,times,serif;">A program is a sequence of (mutually recursive) function and type declarations.</p>
<p style="font-family: georgia,times new roman,times,serif;">prog ::= decl ... decl</p>
<p style="font-family: georgia,times new roman,times,serif;">decl ::= fundecl</p>
<p style="font-family: georgia,times new roman,times,serif;"><b>Function Declaration Structure</b></p>
<p style="font-family: georgia,times new roman,times,serif;">A function declaration specifies the name of the function, its formal parameter, parameter type, return type and expression body. Functions are interpreted in call-by-value evaluation order. All functions must have different names (different functions may have the same formal parameter names).</p>
<p style="font-family: georgia,times new roman,times,serif;">fundecl ::= <b>fun</b> id ( id : tp ) : tp = exp </p><span style="font-family: georgia,times new roman,times,serif;"> A program must contain a declaration of the function </span><i style="font-family: georgia,times new roman,times,serif;">main</i><span style="font-family: georgia,times new roman,times,serif;">, </span>

<p style="font-family: georgia,times new roman,times,serif;"><b>fun</b> main ( id : tp1 ) : tp2 = exp </p><span style="font-family: georgia,times new roman,times,serif;"> where tp1 and tp2 are both int. </span>
<p style="font-family: georgia,times new roman,times,serif;">There is one predeclared (library) function <i>printint</i> of type int -&gt; &lt;&gt;. </p>
<p style="font-family: georgia,times new roman,times,serif;"><b>Type Structure</b></p>
<p style="font-family: georgia,times new roman,times,serif;">The types are int, n-ary tuples, single-argument/single-result function and references (<b>ref</b>). </p>

<p style="font-family: georgia,times new roman,times,serif;">tp ::= int | &lt;tp, ..., tp&gt; | tp -&gt; tp | tp <b>ref</b> | (tp)</p><span style="font-family: georgia,times new roman,times,serif;"> The name "int" is not a reserved word, it is an ordinary identifier. The ref constructor has higher precedence (binds tighter) than the function type constructor (-&gt;). The function type constructor is right associative and the </span><b style="font-family: georgia,times new roman,times,serif;">ref</b><span style="font-family: georgia,times new roman,times,serif;"> type constructor is left associative. </span>

<p style="font-family: georgia,times new roman,times,serif;"><b>Expression Structure</b></p>
<p style="font-family: georgia,times new roman,times,serif;">Expressions are evaluated in left-to-right order. Expression structure is given by the following BNF. </p>
<p style="font-family: georgia,times new roman,times,serif;">un ::= - | <b>not </b>| <b> ! | #</b>i</p>
<p style="font-family: georgia,times new roman,times,serif;">bin ::= + | - | * | &amp; | || | = | &lt; | := </p>

<p style="margin-top: 0px; margin-bottom: 0px; font-family: georgia,times new roman,times,serif;">exp ::= (exp) | id | num | exp; exp | un exp | exp bin exp | &lt;exp, ..., exp&gt; | exp ( exp ) | exp : tp </p>
<p style="margin-top: 0px; margin-bottom: 0px; font-family: georgia,times new roman,times,serif;"> | <b>if</b> exp <b>then</b> exp <b>else</b> exp | <b>if</b> exp <b>then</b> exp | <b>while</b> exp <b>do</b> exp | <b>let</b> id = exp <b>in</b> exp | <b>ref</b> exp </p>

<ol style="font-family: georgia,times new roman,times,serif;">
  <li>Any expression may be parenthesized: (exp) </li>
  <li>Basic values include identifiers, &lt;&gt; (the unit value) and numbers. Sometimes numbers are interpreted as Boolean values (eg: in logical operations; if statements; while loops). In this case, 0 should be interpreted as "false" and non-zero should be interpreted as "true." </li>
  <li>Binary arithmetic and logical operations include &amp;, ||, =, &lt;, +, - , and *. The &amp; operator is short-circuit conjunction, and || is short-circuit disjunction. Equality (=) operates exclusively over integers. The assignment operator is := </li>

  <li>Unary operations include - (unary minus) and <b>not </b>(logical negation: 0 =&gt; 1; non-zero =&gt; 0). The unary operator #i extracts the ith field from a tuple. Tuples are indexed starting with 0. The i in #i must a non-negative integer and #-0 is not legal.</li>
  <li>The operators <b>ref</b>, :=, and ! creates a reference, assigns a value to reference and dereferences a reference respectively.</li>
  <li>If expressions (<b>if</b> exp <b>then</b> exp <b>else</b> exp) execute the "then" branch if the first expression evaluates to a non-zero integer and execute the "else" branch if the first expression evaluates to 0. The else branch extends as far as possible. The else branch may be omitted, in which case it is equivalent to "else &lt;&gt;". </li>

  <li>N-ary tuples (N &gt;= 0) are comma-separated sequences separated by angle-brackets: &lt;exp,...,exp&gt;. </li>
  <li>Precedence levels are as follows (1 is tightest binding):
    <ol>
      <li>#i, <b>ref</b>, function call, !, unary minus<br> </li>
      <li>* </li>

      <li>+, binary minus<br> </li>
      <li>=, &lt; </li>
      <li><b>not</b> </li>
      <li>&amp;, ||</li>
      <li>: </li>

      <li>:=</li>
      <li>if-then-else, do-while</li>
      <li>;</li>
      <li>let-in<br></li>
    </ol> </li>
  <li>All binary operators are left-associative.</li>

  <li>In a call expression, the function argument is surrounded by
	parens. Function call is left-associative so f(x)y
	is (f(x))y.
</li>
  <li>It is legal to use the name <i>int</i> as a function name, parameter name, or variable name; this does not interfere with its use as a type name.</li>
</ol> <span style="font-family: georgia,times new roman,times,serif; font-style: italic;">(This informal definition of Fun-language syntax is hard to use and imprecise. Much better, in a good real-life language definition, would be to have an formal LR(1) grammar for the language. But that's just what you have to build in the Parser assignment.)</span><br>
<p style="font-family: georgia,times new roman,times,serif;"><b>Typing</b></p>

<p style="font-family: georgia,times new roman,times,serif;">Fun has a strong type system with subtyping. The following sections define the typing rules for the language. We will use the Greek letter tau interchangeably with tp. </p>
<p style="font-family: georgia,times new roman,times,serif;"><b>Subtyping</b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">The judgment (tp1 &lt; tp2) states that tp1 is a subtype of tp2.</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">-------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp &lt; tp</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp1 &lt; tp2 tp2 &lt; tp3</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp1 &lt; tp3</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp0 &lt; tp0' ... tpn &lt; tpn'</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">---------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">&lt;tp0, ..., tpn&gt; &lt; &lt;tp0', ..., tpn'&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">(0 &lt;= n &lt; k)</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> ------------------------------------------- </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">&lt;tp0, ..., tpn, ..., tpk&gt; &lt; &lt;tp0, ..., tpn&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp1' &lt; tp1 tp2 &lt; tp2'</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">---------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp1 -&gt; tp2 &lt; tp1' -&gt; tp2'</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp &lt; tp' tp' &lt; tp</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">--------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp ref &lt; tp' ref</p>
<p style="font-family: georgia,times new roman,times,serif;"><b>Expression Typing</b></p>
<p style="font-family: georgia,times new roman,times,serif;">The judgment (G |-- exp : tp) states that expression exp has type tp in context G. A context G is a finite partial map from identifiers to types. The context "nil" is the empty context. The context G [x : tp] is the same as G except it maps identifier x to tp. The following rules define the expression typing judgement.</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- id : G(id)</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">----------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- num : int</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : tp1 G |-- exp2 : tp2</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> ---------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 ; exp2 : tp2</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">optype (un) = tp1-&gt; tp2 G |-- exp : tp1</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> -----------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- un exp : tp2</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">optype (bin) = tp1-&gt; tp2 -&gt; tp3 G |-- exp1 : tp1 G |-- exp2 : tp2</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> -------------------------------------------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 bin exp2 : tp3</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp0 : tp0 ... G |-- expn : tpn</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> --------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- &lt;exp0, ..., expn&gt; : &lt;tp0, ..., tpn&gt;</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : &lt;tp0, ..., tpn&gt; (0 &lt;= i &lt;= n)</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> -----------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- #i exp : tpi</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : tp1 -&gt; tp2 G |-- exp2 : tp1</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> -----------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 exp2 : tp2</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : int G |-- exp2 : tp G |-- exp3 : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> --------------------------------------------------------</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- <b>if </b>exp1 <b>then</b> exp2 <b>else</b> exp3 : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : int G |-- exp2 : &lt;&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> --------------------------------------------------------</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- <b>if </b>exp1 <b>then</b> exp2 : &lt;&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : <b>int </b> G |-- exp2 : &lt;&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> --------------------------------------</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- <b>while</b> exp1 <b>do</b> exp2 : &lt;&gt;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : tp1 G [x : tp1] |-- exp2 : tp2</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> -------------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- <b>let</b> x = exp1 <b>in</b> exp2 : tp2</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">----------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- <b>ref</b> (exp : tp) : tp <b>ref</b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b><br></b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : tp <b>ref</b></p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">----------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- ! exp : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 : tp <b>ref</b> G |-- exp2 : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> ---------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp1 := exp2 : &lt;&gt;</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">tp=tp' G |-- exp : tp'</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">--------------------------- (type constraint)</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : tp : tp</p><span style="font-family: georgia,times new roman,times,serif;"> (Note that in the rule above, the first colon is part of program syntax and the second colon is part of our description of typing rules.)<br><br> </span>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : tp' tp' &lt; tp</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">--------------------------- (subsumption rule)</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- exp : tp</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">The optype function is defined by the following table.</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<table border="1" width="100%" id="table1" style="font-family: georgia,times new roman,times,serif;"> <tbody>
  <tr>
    <td width="281"><b>operator</b>

    </td>
    <td><b>typeof (operator)</b>
    </td>
  </tr>
  <tr>
    <td width="281">- (unary) , <b>not </b>
    </td>

    <td>int -&gt; int
    </td>
  </tr>
  <tr>
    <td width="281">+ , - (binary) , * , &amp; , || , = , &lt;
    </td>
    <td>int -&gt; int -&gt; int
    </td>

  </tr> </tbody>
</table>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b><br></b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b>Function Declaration Typing</b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b><br></b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G [id2 : tp1] |-- exp : tp2</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> ----------------------------------------------------------</p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family:
georgia,times new roman,times,serif;">G |-- ( <b>fun</b> id1 ( id2 : tp1 ) : tp2 = exp) ok</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b><br></b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b>Program Typing</b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><b><br></b></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">contextof(decl1 ... decln) = G</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">G |-- decl1 ok ... G |-- decln ok </p>

<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> ----------------------------------------------------</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">|-- decl1 ... decln ok</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;"> </p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-family: georgia,times new roman,times,serif;">where</p>
<ol style="font-family: georgia,times new roman,times,serif;">
  <li> None of the fundecls declare the same function name (argument names may be repeated). </li>
  <li> contextof(decls) = G means,
    <ul>

      <li>G(x)=tp1-&gt;tp2 if and only if x=<i>printint</i>, tp1=int, tp2=&lt;&gt;, or if one of the decls is <br> (<b>fun</b> x ( id : tp1 ) : tp2 = exp)<br> </li>
    </ul> </li>
</ol><div class="modified">Last modified: Monday, 1 September 2014</div>






<div id="feedly-mini" title="feedly Mini tookit"></div><div id="yass_bottom_edge" style="position: absolute; margin: 0px; padding: 0px; border-width: 0px; height: 0px; left: 0px; top: 0px; width: 100%; display: block; background-image: url(chrome-extension://khpcanbeojalbkpgpmjpdkjnkfcgfkhb/edgebgbot.png); background-position: 0px 0px;"></div></body></html>